<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title th:text="#{title.product}">Product Details</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>

<body>

<a href="/search" th:text="#{link.backToSearch}">Back to Search</a>

<h1 th:text="${product.productName}"></h1>

<div class="product-container">

    <!-- CAROUSEL -->
    <div id="productCarousel" class="carousel slide" data-bs-ride="carousel">

        <div class="carousel-inner">

            <!-- MAIN FEATURE IMAGE -->
            <div class="carousel-item active">
                <img th:src="@{'/images/large/' + ${product.productId} + '/' + ${product.featureImage}}"
                     class="d-block w-100"
                     alt="Product Image">
            </div>

            <!-- ADDITIONAL IMAGES -->
            <div th:each="img : ${additionalImages}" class="carousel-item">
                <img th:src="@{'/images/large/' + ${product.productId} + '/' + ${img}}"
                     class="d-block w-100"
                     alt="Product Image">
            </div>

        </div>

        <!-- Controls -->
        <button class="carousel-control-prev" type="button"
                data-bs-target="#productCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>

        <button class="carousel-control-next" type="button"
                data-bs-target="#productCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>

    </div>



    <div class="product-info">

        <p><strong th:text="#{label.category}">Category:</strong>
            <span th:text="${product.categoryId.categoryName}"></span>
        </p>

        <p><strong th:text="#{label.description}">Description:</strong>
            <span th:text="${product.description}"></span>
        </p>

        <p><strong th:text="#{label.price}">Price:</strong>
            €<span th:text="${product.price}"></span>
        </p>

        <p th:if="${product.discountedPrice != null}">
            <strong th:text="#{label.discountedPrice}">Discounted Price:</strong>
            €<span th:text="${product.discountedPrice}"></span>
        </p>

        <p><strong th:text="#{label.size}">Size:</strong> <span th:text="${product.size}"></span></p>
        <p><strong th:text="#{label.colour}">Colour:</strong> <span th:text="${product.colour}"></span></p>
        <p><strong th:text="#{label.material}">Material:</strong> <span th:text="${product.material}"></span></p>

        <p><strong th:text="#{label.sustainability}">Sustainability Rating:</strong>
            <span th:text="${product.sustainabilityRating}"></span>/5
        </p>

        <p><strong th:text="#{label.manufacturer}">Manufacturer:</strong>
            <span th:text="${product.manufacturer}"></span>
        </p>

        <p><strong th:text="#{label.releaseDate}">Release Date:</strong>
            <span th:text="${#dates.format(product.releaseDate, 'yyyy-MM-dd')}"></span>
        </p>

        <p><strong th:text="#{label.supplier}">Supplier:</strong>
            <span th:text="${product.supplierId.supplierName}"></span>
        </p>

    </div>
</div>

<hr>

<!-- REVIEWS -->
<h2 th:text="#{header.reviews}">Customer Reviews</h2>

<div th:if="${product.reviewList.size() == 0}">
    <p th:text="#{label.noReviews}">No reviews yet.</p>
</div>

<ul th:each="r : ${product.reviewList}">
    <li>
        <strong th:text="${r.rating}"></strong>/5 —
        <span th:text="${r.reviewText}"></span>
    </li>
</ul>

<hr>

<!-- INVENTORY -->
<h2 th:text="#{header.inventory}">Inventory</h2>

<table>
    <thead>
    <tr>
        <th th:text="#{column.inventoryId}">Inventory ID</th>
        <th th:text="#{column.inStock}">In Stock</th>
        <th th:text="#{column.reserved}">Reserved</th>
        <th th:text="#{column.reorderPoint}">Reorder Point</th>
    </tr>
    </thead>

    <tbody>
    <tr th:each="i : ${product.inventoryList}">
        <td th:text="${i.inventoryId}"></td>
        <td th:text="${i.quantityInStock}"></td>
        <td th:text="${i.quantityReserved}"></td>
        <td th:text="${i.reorderPoint}"></td>
    </tr>
    </tbody>
</table>

<hr>

<!-- Language Switcher -->
<a href="?lang=en">English</a> |
<a href="?lang=fr">Français</a> |
<a href="?lang=es">Español</a>

</body>
</html>

